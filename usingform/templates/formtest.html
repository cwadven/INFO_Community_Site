{% extends 'formlayout/formlayer.html' %}
{% block name %}
<h2 style="display: flex;justify-content: space-between;">{{board_name}}{% if user.is_anonymous %}</h2>{% endif %}
{% if user.is_authenticated %}
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
    글쓰기
</button>
</h2>
<div class="collapse" id="collapseExample">
<br>
<form enctype="multipart/form-data" action="{% url 'forms:selectform' board_name %}" method="post">
    {% csrf_token %}
    <table>
    {{ form.as_p }}
    
    <!-- 눈속임 필요 (이미지 선택 하기)-->
    <div class="Image_Dont">{{imageform.as_p}}</div>
    <div style="margin-bottom:10px;">이미지 : <input type="button" value="파일 선택" onclick="document.getElementById('id_image').click();" /><span id='files_count'> 선택된 파일 없음</span></div>
    <span style="display: none;" id="one_input"></span>

    <!-- 눈속임 필요 (선택 후 몇개 추가) -->
    <input style="display: none;" id="image_add" type="file" accept="image/*"/>
    <span style="display: none;" id="image_fake"><input style="margin-bottom: 10px;" type="button" value="파일 추가" onclick="document.getElementById('image_add').click();" /></span>
    <output style="display: flex;flex-flow:wrap; margin-bottom: 10px;" id="result_picture"></output>
    
    <!-- 눈속임 필요 (파일 선택 하기)-->
    <div class="File_Dont">{{filesform.as_p}}</div>
    <div style="margin-bottom:10px;">첨부파일 : <input type="button" value="파일 선택" onclick="document.getElementById('id_files').click();" /><span id='files_count_file'> 선택된 파일 없음</span></div>
    <span style="display: none;" id="one_input_file"></span>

    <!-- 눈속임 필요 (선택 후 몇개 추가) -->
    <input style="display: none;" id="file_add" type="file" accept="image/*"/>
    <span style="display: none;" id="file_fake"><input style="margin-bottom: 10px;" type="button" value="파일 추가" onclick="document.getElementById('file_add').click();" /></span>
    <output id="result_file"></output>

    </table>
    <div style="text-align: center;">
    <input type="submit" class="btn btn-warning" value="📃글작성" />
    </div>
</form>
</div>
{% endif %}
<hr>
{% for form_contents in getForm %}
<p style="display: flex;">
    {% if form_contents.author.Image %}
    <img style="border-radius: 5px;" width="50" height="50" src={{form_contents.author.Image.url}}>
    {% else %}
    <img style="border-radius: 5px;" width="50" height="50" src=https://image.flaticon.com/icons/svg/634/634741.svg>
    {% endif %}
    <span>
    <b>{{form_contents.author.Name}}</b><br>
    <em>작성 : {{form_contents.created_at|date:"m/d H:i"}}</em>
    </span>
</p>
<p><h3>{{form_contents.title_short}}</h3></p>
<a href="{% url 'forms:shw_form' form_contents.category form_contents.id %}">자세히 보기</a>
<hr>
{% endfor %}

{% endblock %}