{% extends 'formlayout/formlayer.html' %}
{% block name %}

<script>
$('#exampleModal').on('show.bs.modal', function (event) {
  var button = $(event.relatedTarget) // Button that triggered the modal
  var recipient = button.data('whatever') // Extract info from data-* attributes
  // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
  // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
  var modal = $(this)
  modal.find('.modal-title').text('New message to ' + recipient)
  modal.find('.modal-body input').val(recipient)
})
</script>

<h2>번호 : {{detail_getForm.id}}</h2>
<!-- 작성자 -->
작성자 : {{detail_getForm.author.Name}}<br>

<!-- 제목 -->
<h3>제목 :</h3>
{{detail_getForm.title}} <br>

<!-- 내용 -->
<h3>내용 :</h3>
{{detail_getForm.body}} <br>

<!-- 사진 -->
<b>사진</b><br>
{% for i in detail_getForm.image_set.all %}
<a href="{{i.image.url}}" download>{{i.image.name|slice:"14:"}}</a><br>
{% endfor %}

<!-- 첨부파일 -->
<b>첨부파일</b><br>
{% for i in detail_getForm.files_set.all %}
<a href="{{i.files.url}}" download>{{i.files.name|slice:"11:"}}</a><br>
{% endfor %}
<br>
<!-- 수정하기 modal -->
<form enctype="multipart/form-data" action="{% url 'forms:mod_form' detail_getForm.category detail_getForm.id %}" method="post">
    {% csrf_token %}
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">수정하기</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form>
            <div class="form-group">
              <label for="recipient-name" class="col-form-label">제목 :</label>
              <input name="title" type="text" class="form-control" id="recipient-name" value="{{detail_getForm.title}}" required>
            </div>
            <div class="form-group">
              <label for="message-text" class="col-form-label">내용 :</label>
              <textarea name="body" class="form-control" id="message-text" required>{{detail_getForm.body}}</textarea>
            </div>
            {% for i in detail_getForm.image_set.all %}
            {{i.image.name|slice:"14:"}}<br>
            {% endfor %}
            이미지 : <input onchange="$('#image_modify').val('true');console.log($('#image_modify').val());" type="file" name="image" accept="image/*" multiple><br>
            <!-- ajax를 이용해서 클릭해서 변경시키면 이름이랑 전부 없애고 views에스는 이 녀석들을 저장 이거를 누르지 않는다면 그냥 저장 -->
            {% for i in detail_getForm.files_set.all %}
            {{i.files.name|slice:"11:"}}<br>
            {% endfor %}
            첨부파일 : <input onchange="$('#files_modify').val('true');console.log($('#files_modify').val());" type="file" name="files" multiple>
            <input id="image_modify" type="text" name="image_modify" value='' hidden>
            <input id="files_modify" type="text" name="files_modify" value='' hidden>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">취소</button>
          <button type="submit" class="btn btn-primary">수정하기</button>
        </div>
      </div>
    </div>
  </div>
</form>

<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="@mdo">수정하기</button>
<a href="{% url 'forms:del_form' detail_getForm.category detail_getForm.id %}">삭제하기</a>
<hr>

{% endblock %}